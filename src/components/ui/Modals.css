/* === Styles ສຳລັບ Modal (ໜ້າຕ່າງ pop-up ເຊັ່ນ: ImportDataModal, StyleEditorModal) === */

/* Style ສຳລັບ Backdrop (ພື້ນຫຼັງສີດຳໂປ່ງໃສ) ທີ່ຢູ່ດ້ານຫຼັງ Modal */
.floating-panel-backdrop {
  position: fixed; /* ຕັ້ງตำแหน่งให้คงที่ ไม่เลื่อนตามการ scroll */
  top: 0;
  left: 0;
  width: 100%; /* กว้างเต็มจอ */
  height: 100%; /* สูงเต็มจอ */
  background-color: rgba(0, 0, 0, 0.6); /* สีดำโปร่งแสง 60% */
  z-index: 1040; /* ให้อยู่ชั้นบนสุด */
  display: flex; /* ใช้ Flexbox */
  justify-content: center; /* จัด Modal ให้อยู่กึ่งกลางแนวนอน */
  align-items: center; /* จัด Modal ให้อยู่กึ่งกลางแนวตั้ง */
}

/* Style ສຳລັບตัว Modal Panel ที่ลอยอยู่ */
.floating-panel {
  background: var(--color-dark-surface-alt);
  border: 1px solid var(--color-dark-border);
  border-radius: 8px; /* ทำให้มุมมน */
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5); /* เพิ่มเงาให้ดูมีมิติ */
  padding: 1rem;
  display: flex;
  flex-direction: column; /* จัดเรียงเนื้อหาภายในตามแนวตั้ง */
  animation: modal-fade-in 0.3s ease-out; /* เพิ่ม animation ตอนปรากฏ */
}

/* Keyframes สำหรับ animation ของ Modal */
@keyframes modal-fade-in {
  from {
    opacity: 0; /* เริ่มจากโปร่งใส */
    transform: scale(0.9); /* เริ่มจากขนาดเล็กกว่าปกติเล็กน้อย */
  }
  to {
    opacity: 1; /* ค่อยๆ ชัดขึ้น */
    transform: scale(1); /* ขยายเป็นขนาดปกติ */
  }
}

/* Style ของส่วนหัว (Header) ของ Modal */
.panel-header {
  display: flex;
  justify-content: space-between; /* จัดให้ h3 และ button อยู่สุดขอบซ้ายขวา */
  align-items: center;
  color: var(--color-text-light);
  padding-bottom: 0.75rem;
  margin-bottom: 0.75rem;
  border-bottom: 1px solid var(--color-dark-border); /* เพิ่มเส้นคั่นด้านล่าง */
}

.panel-header h3 {
  margin: 0;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

/* Style ของປຸ່ມปิด (X) */
.close-button {
  background: transparent;
  border: none;
  color: var(--color-text-muted);
  cursor: pointer;
}
.close-button:hover {
  color: var(--color-text-active);
}

/* Style ของส่วนเนื้อหา (Content) ของ Modal */
.panel-content {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* --- Styles ສະເພາະສຳລັບ Import Data Modal --- */
.import-data-modal {
  width: 500px;
  max-width: 90%; /* สำหรับจอเล็ก */
}

/* Style ของพื้นที่สำหรับลากไฟล์มาวาง (Drag and Drop) */
.dropzone {
  border: 2px dashed #444; /* เส้นขอบแบบเส้นประ */
  border-radius: 8px;
  padding: 2rem;
  text-align: center;
  cursor: pointer;
  transition: border-color 0.3s; /* animation ตอนเปลี่ยนสีเส้นขอบ */
}
.dropzone:hover {
  border-color: var(--color-accent-blue); /* เปลี่ยนสีเส้นขอบเมื่อเมาส์ชี้ */
}

/* Style ของข้อความคำแนะนำ */
.instructions {
  margin-top: 1rem;
  font-size: 0.85rem;
  color: #aaa;
}
.instructions > div {
  display: flex;
  justify-content: center;
  gap: 1rem;
  margin-top: 0.5rem;
}

/* --- Styles ສະເພາະສຳລັບ Style Editor Modal --- */
.style-editor-panel {
  width: 350px;
}

/* Style ของกลุ่มควบคุม style */
.style-group {
  margin-bottom: 1.5rem;
}

.style-group:last-of-type {
  margin-bottom: 1rem;
}

.style-group h4 {
  font-size: 0.9rem;
  color: var(--color-accent-blue);
  margin-bottom: 1rem;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding-bottom: 0.5rem;
}

/* Style ของແຕ່ລະລາຍການควบคุม (เช่น label และ input) */
.style-control {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  font-size: 0.85rem;
}

.style-control label {
  color: var(--color-text-muted);
}

/* Style ของ input[type="color"] (ตัวเลือกสี) */
.style-control input[type="color"] {
  -webkit-appearance: none; /* ลบ style เริ่มต้นของ browser */
  -moz-appearance: none;
  appearance: none;
  border: none;
  width: 40px;
  height: 25px;
  cursor: pointer;
  background-color: transparent;
}
.style-control input[type="color"]::-webkit-color-swatch-wrapper {
  padding: 0;
}
.style-control input[type="color"]::-webkit-color-swatch {
  border: 1px solid var(--color-dark-border-light);
  border-radius: 4px;
}
.style-control input[type="color"]::-moz-color-swatch {
  border: 1px solid var(--color-dark-border-light);
  border-radius: 4px;
}

/* Style ของ input[type="range"] (แถบเลื่อน) */
.style-control input[type="range"] {
  width: 140px;
  cursor: pointer;
}

/* Style ของປຸ່ມ Save */
.save-style-button {
  width: 100%;
  padding: 0.75rem;
  background-color: var(--color-accent-blue);
  border: none;
  border-radius: 6px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
  margin-top: 1rem;
}
.save-style-button:hover {
  background-color: var(--color-accent-blue-dark);
}

/* --- Styles ສຳລັບ Export Data Modal --- */
.export-data-modal {
  width: 450px;
}

.export-group {
  margin-bottom: 1.5rem;
}

.export-group h4 {
  font-size: 0.9rem;
  color: var(--color-accent-blue);
  margin-bottom: 0.75rem;
}

/* Style ของ dropdown (select) */
.export-select {
  width: 100%;
  padding: 0.5rem;
  background-color: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--color-dark-border-light);
  border-radius: 4px;
  color: var(--color-text-light);
}

/* Style ของ container ที่เก็บປຸ່ມ format */
.format-buttons {
  display: grid;
  grid-template-columns: repeat(3, 1fr); /* แบ่งเป็น 3 คอลัมน์เท่าๆ กัน */
  gap: 0.5rem;
}

/* Style ของປຸ່ມเลือก format (GeoJSON, KML, CSV) */
.format-button {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 1rem 0.5rem;
  background-color: rgba(255, 255, 255, 0.05);
  border: 1px solid var(--color-dark-border-light);
  color: var(--color-text-muted);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
}

.format-button:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: var(--color-text-active);
}

/* Style ของປຸ່ມ format ເມື່ອถูกเลือก */
.format-button.active {
  background-color: var(--color-accent-blue);
  border-color: var(--color-accent-blue-dark);
  color: white;
  font-weight: 600;
}

/* Style ของປຸ່ມ Export หลัก */
.export-action-button {
  width: 100%;
  padding: 0.75rem;
  background-color: var(--color-accent-blue);
  border: none;
  border-radius: 6px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
  margin-top: 1rem;
}
.export-action-button:hover {
  background-color: var(--color-accent-blue-dark);
}
/* Style ของປຸ່ມ Export ເມື່ອถูกปิดใช้งาน */
.export-action-button:disabled {
  background-color: #555;
  cursor: not-allowed;
}

/* --- Styles ສະເພາະສຳລັບ Image Layer Modal --- */
.image-preview {
  text-align: center;
  margin: 1rem 0;
  padding: 0.5rem;
  background-color: #1a1d21;
  border-radius: 6px;
  border: 1px solid #4a4d52;
}
.image-preview img {
  max-width: 100%;
  max-height: 200px;
  border-radius: 4px;
}

.coordinate-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
}

/* --- Modal Footer & Buttons --- */
.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 1px solid #4a4d52;
}

.modal-button,
.modal-button-secondary {
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 6px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.modal-button {
  background-color: #007acc;
  color: white;
}
.modal-button:hover {
  background-color: #00aaff;
}

.modal-button-secondary {
  background-color: #4a4d52;
  color: #f0f0f0;
}
.modal-button-secondary:hover {
  background-color: #5a5d62;
}
